<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Corrected viewport for proper responsiveness on all devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Marketing Jeopardy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Google Sans', 'Roboto', sans-serif;
            background-color: #F1F3F4;
            color: #3c4043;
            /* Removed overflow: hidden to prevent content from being cut off on smaller screens */
        }

        .card {
            background-color: #FFFFFF;
            border-radius: 1.25rem;
            border: 1px solid #DADCE0;
            padding: 1rem;
            box-shadow: 0 1px 3px 0 rgba(60,64,67,0.302), 0 4px 8px 3px rgba(60,64,67,0.149);
        }

        .team-card {
            display: flex;
            flex-direction: column; /* Changed for better layout with buttons */
            align-items: center;
            gap: 0.75rem; /* space-x-3 */
        }
        
        /* Corrected grid layout for a more balanced 5x3 board */
        .question-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 0.75rem;
        }

        .question-number {
            background-color: #E8EAED;
            color: #3c4043;
            text-align: center;
            padding: 1rem;
            border-radius: 1.25rem;
            font-size: 1.5rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            display: flex;
            align-items: center;
            justify-content: center;
            aspect-ratio: 1 / 1; /* Ensures the question boxes are square */
        }
        
        .question-number.answered {
            background-color: #F8F9FA;
            color: #BDBDBD;
            cursor: not-allowed;
            text-decoration: line-through;
        }
        
        .question-number:hover:not(.answered) {
            background-color: #DADCE0;
        }
        
        /* NOTE: The @apply directive for Tailwind CSS does not work in a <style> tag. 
           These styles have been applied directly to the elements as classes in the HTML. */

    </style>
</head>
<!-- Corrected body styles for better layout and responsiveness -->
<body class="p-4 flex items-center justify-center min-h-screen">

    <main class="w-full max-w-7xl h-full mx-auto grid grid-cols-1 lg:grid-cols-6 gap-4">
        
        <!-- Left Column: Teams -->
        <div id="teamsContainer" class="col-span-1 space-y-3 flex flex-col">
            <!-- Team cards will be generated here -->
        </div>

        <!-- Center Column: Clue Display & Question Board -->
        <div class="lg:col-span-4 flex flex-col gap-4">
            <div id="clueDisplayCard" class="card flex-grow flex flex-col items-center justify-center text-center p-6 min-h-[300px]">
                <!-- Content is now dynamically generated by JS -->
            </div>
            <div id="questionGrid" class="question-grid">
                <!-- 1-15 buttons will be generated here -->
            </div>
        </div>

        <!-- Right Column: Timer & Controls -->
        <div class="col-span-1 space-y-3 flex flex-col">
            <div class="card text-center flex-grow">
                <h3 class="text-lg font-medium text-gray-500 mb-1">Current Team</h3>
                <p id="currentTeamDisplay" class="text-3xl font-bold text-blue-600">-</p>
            </div>
            <div class="card text-center flex-grow">
                <h3 class="text-lg font-medium text-gray-500 mb-1">Time Left</h3>
                <p id="timerDisplay" class="text-6xl font-bold text-red-600">00</p>
            </div>
            <div id="endGameButton" class="card text-center flex-grow flex items-center justify-center cursor-pointer hover:bg-red-100 transition-colors">
                <h3 class="text-xl font-bold text-red-600">End Game</h3>
            </div>
        </div>

    </main>

    <!-- NOTE: Local audio files like 'tone.mp3' will only work if they are in the same directory as the HTML file.
         For a web-based version, you would need to host these files and provide a full URL. -->
    <audio id="clueSound" src="tone.mp3" preload="auto"></audio>
    <audio id="backgroundMusic" src="background.mp3" preload="auto" loop></audio>

<script>
    // --- GAME STATE ---
    let gameStarted = false;
    let currentTeamIndex = 0;
    let answeredQuestions = [];
    let teamScores = {};
    let timerInterval = null;
    let answeredBonusQuestions = [];
    let activeBonusIndex = null;
    
    // --- STATIC DATA ---
    const teams = [
        { name: 'Pixel Patriots', logoUrl: 'https://kapildoesmarketing.github.io/familyfeud/1.png' },
        { name: 'Impression Invaders', logoUrl: 'https://kapildoesmarketing.github.io/familyfeud/2.png' },
        { name: 'Xtreme Optimizers', logoUrl: 'https://kapildoesmarketing.github.io/familyfeud/3.png' },
        { name: 'Engagement Experts', logoUrl: 'https://kapildoesmarketing.github.io/familyfeud/5.png' },
        { name: 'Lead Legends', logoUrl: 'https://kapildoesmarketing.github.io/familyfeud/4.png' }
    ];

    const bonusQuestions = [
        { teamIndex: 0, clue: "According to a survey conducted by GWI, in India, x% of YouTube Shorts users don't use Instagram Reels.", answer: "44%" },
        { teamIndex: 1, clue: "Google and/or YouTube are present in x% of the journeys where consumers said they discovered a new brand, product or retailer.", answer: "87%" },
        { teamIndex: 2, clue: "x% of shoppers looked for shopping ideas on Google.", answer: "81%" },
        { teamIndex: 3, clue: "According to a survey conducted by Kantar, in the past month, x% of Indian consumers claimed to have used YouTube, compared to 45% for Jiocinema + Hotstar and 3% for Amazon Prime.", answer: "80%" },
        { teamIndex: 4, clue: "On average YouTube Ads drove an uplift on 'Purchase Intent' x times greater than Social Platform Ads across all Kantar Context Lab Studies in India.", answer: "1.2 times" }
    ];
    
    // Corrected grammar, spelling, and capitalization in questions and answers.
    const jeopardyQuestions = [
        { id: 1, clue: "This feature can supercharge the performance of Search Ads and has shown a 27% increase in conversions for activated campaigns.", response: "What is AI Max for Search?" },
        { id: 2, clue: "Merchants using this new Demand Gen feature have seen an average 11% increase in conversion value by seamlessly adding products to a user's cart on their website.", response: "What are Checkout Links?" },
        { id: 3, clue: "Powered by Google AI, this feature helps campaigns capture additional valuable conversions by tapping into more diverse search sources.", response: "What is Smart Bidding Exploration?" },
        { id: 4, clue: "This new Performance Max feature provides channel-level breakdowns of performance, helping advertisers optimize their campaigns.", response: "What is Channel Performance Reporting?" },
        { id: 5, clue: "Now offering increased visibility within Performance Max, this report allows you to find customer queries and make informed optimizations.", response: "What is the Search Terms report?" },
        { id: 6, clue: "This Google-owned inventory is now available on Demand Gen.", response: "What is Maps?" },
        { id: 7, clue: "This interactive shopping experience, powered by the Google Merchant Center, lets viewers discover and engage with products directly from the big screen.", response: "What is Shoppable CTV?" },
        { id: 8, clue: "This most prominent placement is now shoppable on mobile.", response: "What is Shoppable Masthead (MH)?" },
        { id: 9, clue: "This Search product/feature expands what AI Overviews can do, with more advanced reasoning and multimodality.", response: "What is AI Mode?" },
        { id: 10, clue: "This keywordless targeting technology for Performance Max and Search is considered the best way to leverage ads in AI Overviews.", response: "What is broad match?" },
        { id: 11, clue: "This feature, which was previously available in PMax, Search, and Shopping, is now available in Demand Gen campaigns.", response: "What is New Customer Acquisition (NCA)?" },
        { id: 12, clue: "With this updated platform, you can deepen existing connections, find new ones, and integrate authentic creator content into your ad strategies.", response: "What is the Creator Partnerships Hub?" },
        { id: 13, clue: "This new feature/tool helps you analyze cross-channel performance and determine where to adjust budgets or invest incremental media dollars, directly in Google Analytics.", response: "What is the Cross-Channel Budgeting Tool?" },
        { id: 14, clue: "This tagging solution for advertisers enhances conversion data accuracy by routing it through your websiteâ€™s own server, improving bidding, campaign optimization, and ROAS.", response: "What is Google Tag Gateway?" },
        { id: 15, clue: "This new NCA feature expands on existing capabilities to not only optimize for new customers, but specifically for those who are not yet searching for or engaging with your brand.", response: "What is Prospecting Mode in NCA?" },
    ];

    // --- DOM ELEMENTS ---
    const teamsContainer = document.getElementById('teamsContainer');
    const questionGrid = document.getElementById('questionGrid');
    const clueDisplayCard = document.getElementById('clueDisplayCard');
    const currentTeamDisplay = document.getElementById('currentTeamDisplay');
    const timerDisplay = document.getElementById('timerDisplay');
    const endGameButton = document.getElementById('endGameButton');
    const clueSound = document.getElementById('clueSound');
    const backgroundMusic = document.getElementById('backgroundMusic');

    // --- RENDER FUNCTIONS ---
    function renderGame() {
        renderTeams();
        renderCenterColumn();
    }

    function renderTeams() {
        teamsContainer.innerHTML = '';
        teams.forEach((team, index) => {
            const teamCard = document.createElement('div');
            const isActive = index === currentTeamIndex && gameStarted;
            const bonusAnswered = answeredBonusQuestions.includes(index);
            teamCard.className = `card p-3 transition-all duration-300 ${isActive ? 'ring-4 ring-blue-400' : ''}`;
            teamCard.innerHTML = `
                <div class="flex items-center gap-3 w-full">
                    <img src="${team.logoUrl}" alt="${team.name} Logo" class="w-10 h-10 object-contain cursor-pointer ${bonusAnswered ? 'cursor-not-allowed' : ''}" onerror="this.src='https://placehold.co/40x40/E8EAED/3c4043?text=G'" onclick="triggerBonusRound(${index})">
                    <div class="flex-grow">
                        <p class="text-base font-bold">${team.name}</p>
                        <p class="text-2xl font-bold text-green-600">${teamScores[team.name] || 0}</p>
                    </div>
                </div>
                <div class="flex items-center justify-end gap-2 mt-2 w-full">
                    <button class="w-8 h-8 flex items-center justify-center rounded-full bg-green-100 text-green-700 hover:bg-green-200 transition-colors text-lg font-bold" onclick="manualAdjustScore(${index}, 5)" title="Add 5 points">+</button>
                    <button class="w-8 h-8 flex items-center justify-center rounded-full bg-red-100 text-red-700 hover:bg-red-200 transition-colors text-lg font-bold" onclick="manualAdjustScore(${index}, -5)" title="Subtract 5 points">-</button>
                </div>
            `;
            teamsContainer.appendChild(teamCard);
        });
    }

    function renderCenterColumn() {
        if (!gameStarted) {
            clueDisplayCard.innerHTML = `
                <h2 class="text-4xl font-bold">Welcome to Jeopardy!</h2>
                <p class="text-xl text-gray-500 mt-4">Get ready to test your knowledge.</p>
                <button id="startGameBtn" class="mt-8 bg-blue-600 text-white font-bold py-3 px-8 rounded-full text-lg shadow-lg hover:bg-blue-700 transition-transform transform hover:scale-105">
                    Start Game
                </button>
            `;
            questionGrid.innerHTML = '';
            currentTeamDisplay.textContent = '-';
            document.getElementById('startGameBtn').addEventListener('click', startGame);
        } else {
            currentTeamDisplay.textContent = teams[currentTeamIndex].name;
            renderQuestionGrid();
        }
    }

    function renderQuestionGrid() {
        questionGrid.innerHTML = '';
        for (let i = 1; i <= 15; i++) {
            const questionDiv = document.createElement('div');
            questionDiv.className = `question-number ${answeredQuestions.includes(i) ? 'answered' : ''}`;
            questionDiv.textContent = i;
            questionDiv.dataset.questionId = i;
            if (!answeredQuestions.includes(i)) {
                questionDiv.addEventListener('click', selectQuestion);
            }
            questionGrid.appendChild(questionDiv);
        }
    }
    
    // --- GAME LOGIC ---
    function startGame() {
        gameStarted = true;
        currentTeamIndex = 0;
        answeredQuestions = [];
        answeredBonusQuestions = [];
        activeBonusIndex = null;
        teamScores = teams.reduce((acc, team) => ({ ...acc, [team.name]: 0 }), {});
        clueDisplayCard.innerHTML = `<h2 class="text-3xl font-medium text-gray-600">Select a question to display the clue.</h2>`;
        
        backgroundMusic.volume = 0.5; // Adjusted volume
        backgroundMusic.currentTime = 0;
        backgroundMusic.play().catch(e => console.log("Background music could not be played."));

        renderGame();
    }

    function selectQuestion(event) {
        const questionId = parseInt(event.target.dataset.questionId);
        if (answeredQuestions.includes(questionId)) return;
        
        clueSound.currentTime = 0;
        clueSound.play().catch(e => console.log("Clue sound could not be played."));

        answeredQuestions.push(questionId);
        const question = jeopardyQuestions.find(q => q.id === questionId);
        
        if (question) {
            clueDisplayCard.innerHTML = `
                <div class="flex-grow flex items-center justify-center">
                    <p class="text-4xl font-light">${question.clue}</p>
                </div>
                <div class="flex space-x-4 mt-4">
                    <button class="font-bold py-2 px-6 rounded-full shadow-md transition-transform transform hover:scale-105 bg-green-500 text-white" onclick="handleAnswer(true)">Right</button>
                    <button class="font-bold py-2 px-6 rounded-full shadow-md transition-transform transform hover:scale-105 bg-red-500 text-white" onclick="handleAnswer(false)">Wrong</button>
                </div>
            `;
            startTimer(30, false);
        }
        renderQuestionGrid();
    }

    window.handleAnswer = (isCorrect) => {
        stopTimer();
        if (isCorrect) {
            adjustScore(currentTeamIndex, 10);
            nextTurn();
        } else {
            enterStealMode();
        }
    }

    function enterStealMode() {
        clueDisplayCard.innerHTML = `
            <div class="flex-grow flex items-center justify-center flex-col">
                <p class="text-3xl font-bold text-yellow-500">STEAL!</p>
                <p class="text-xl text-gray-600 mt-2">Which team is stealing?</p>
            </div>
            <div class="flex space-x-2 mt-4 flex-wrap justify-center">
                ${teams.map((team, index) => {
                    if (index === currentTeamIndex) return ''; // Current team can't steal
                    return `<button class="rounded-full w-16 h-16 flex items-center justify-center border-4 border-transparent hover:border-yellow-400 transition-all" onclick="selectStealingTeam(${index})">
                                <img src="${team.logoUrl}" class="w-14 h-14 rounded-full object-cover" onerror="this.src='https://placehold.co/56x56/E8EAED/3c4043?text=G'">
                            </button>`;
                }).join('')}
            </div>
            <button class="font-bold py-2 px-6 rounded-full shadow-md transition-transform transform hover:scale-105 bg-gray-500 text-white mt-4" onclick="noSteal()">No Steal</button>
        `;
        startTimer(15, true);
    }
    
    window.selectStealingTeam = (teamIndex) => {
        stopTimer();
        clueDisplayCard.innerHTML = `
             <div class="flex-grow flex items-center justify-center flex-col">
                <p class="text-3xl font-bold">Steal attempt by:</p>
                <p class="text-2xl font-bold text-blue-600 mt-2">${teams[teamIndex].name}</p>
            </div>
            <div class="flex space-x-4 mt-4">
                <button class="font-bold py-2 px-6 rounded-full shadow-md transition-transform transform hover:scale-105 bg-green-500 text-white" onclick="handleStealAnswer(${teamIndex}, true)">Right (+5)</button>
                <button class="font-bold py-2 px-6 rounded-full shadow-md transition-transform transform hover:scale-105 bg-red-500 text-white" onclick="handleStealAnswer(${teamIndex}, false)">Wrong (-5)</button>
            </div>
        `;
    }

    window.noSteal = () => {
        stopTimer();
        nextTurn();
    }
    
    window.handleStealAnswer = (teamIndex, isCorrect) => {
        adjustScore(teamIndex, isCorrect ? 5 : -5);
        nextTurn();
    }

    window.manualAdjustScore = (teamIndex, points) => {
        // This function allows the host to manually change scores.
        adjustScore(teamIndex, points);
    }

    function adjustScore(teamIndex, points) {
        const teamName = teams[teamIndex].name;
        teamScores[teamName] += points;
        renderTeams();
    }

    function nextTurn() {
        if (answeredQuestions.length === jeopardyQuestions.length) {
            endGame();
            return;
        }
        currentTeamIndex = (currentTeamIndex + 1) % teams.length;
        clueDisplayCard.innerHTML = `<h2 class="text-3xl font-medium text-gray-600">Next turn! Select a question.</h2>`;
        renderGame();
    }
    
    // --- BONUS ROUND LOGIC ---
    window.triggerBonusRound = (logoIndex) => {
        if (answeredBonusQuestions.includes(logoIndex) || !gameStarted) return;
        stopTimer();
        activeBonusIndex = logoIndex;
        const bonusQuestion = bonusQuestions.find(q => q.teamIndex === logoIndex);

        clueDisplayCard.innerHTML = `
            <div class="flex-grow flex items-center justify-center flex-col">
                <p class="text-3xl font-bold text-purple-600">BONUS QUESTION!</p>
                <p class="text-2xl font-light mt-4 text-center">${bonusQuestion.clue}</p>
                <p class="text-xl text-gray-600 mt-6">Which team answered first?</p>
            </div>
            <div class="flex space-x-2 mt-4 flex-wrap justify-center">
                ${teams.map((team, index) => {
                    return `<button class="rounded-full w-16 h-16 flex items-center justify-center border-4 border-transparent hover:border-purple-400 transition-all" onclick="selectBonusTeam(${index})">
                                <img src="${team.logoUrl}" class="w-14 h-14 rounded-full object-cover" onerror="this.src='https://placehold.co/56x56/E8EAED/3c4043?text=G'">
                            </button>`;
                }).join('')}
            </div>
             <button class="font-bold py-2 px-6 rounded-full shadow-md transition-transform transform hover:scale-105 bg-gray-500 text-white mt-6" onclick="cancelBonusRound()">Cancel Bonus</button>
        `;
    }

    window.selectBonusTeam = (teamIndex) => {
        clueDisplayCard.innerHTML = `
             <div class="flex-grow flex items-center justify-center flex-col">
                <p class="text-3xl font-bold text-purple-600">Bonus Attempt by:</p>
                <p class="text-2xl font-bold text-blue-600 mt-2">${teams[teamIndex].name}</p>
            </div>
            <div class="flex space-x-4 mt-4">
                <button class="font-bold py-2 px-6 rounded-full shadow-md transition-transform transform hover:scale-105 bg-green-500 text-white" onclick="handleBonusAnswer(${teamIndex}, true)">Right (+5)</button>
                <button class="font-bold py-2 px-6 rounded-full shadow-md transition-transform transform hover:scale-105 bg-red-500 text-white" onclick="handleBonusAnswer(${teamIndex}, false)">Wrong (-5)</button>
            </div>
        `;
    }

    window.handleBonusAnswer = (teamIndex, isCorrect) => {
        if (activeBonusIndex === null) return;
        adjustScore(teamIndex, isCorrect ? 5 : -5);
        answeredBonusQuestions.push(activeBonusIndex);
        activeBonusIndex = null;
        renderTeams();
        clueDisplayCard.innerHTML = `<h2 class="text-3xl font-medium text-gray-600">Bonus round complete. It is ${teams[currentTeamIndex].name}'s turn. Select a question.</h2>`;
    }

    window.cancelBonusRound = () => {
        activeBonusIndex = null;
        clueDisplayCard.innerHTML = `<h2 class="text-3xl font-medium text-gray-600">Bonus round canceled. It is ${teams[currentTeamIndex].name}'s turn. Select a question.</h2>`;
    }

    function endGame() {
        stopTimer();
        gameStarted = false;
        questionGrid.innerHTML = '';
        
        backgroundMusic.pause();
        backgroundMusic.currentTime = 0;

        let highestScore = -Infinity;
        let winners = [];
        for (const teamName in teamScores) {
            if (teamScores[teamName] > highestScore) {
                highestScore = teamScores[teamName];
                winners = [teamName];
            } else if (teamScores[teamName] === highestScore) {
                winners.push(teamName);
            }
        }

        let winnerMessage;
        if (winners.length > 1) {
            winnerMessage = `It's a tie between ${winners.join(' & ')}!`;
        } else if (winners.length === 1) {
            winnerMessage = `${winners[0]} wins the game!`;
        } else {
             winnerMessage = "Good game, everyone!";
        }

        clueDisplayCard.innerHTML = `
            <h2 class="text-4xl font-bold">Game Over!</h2>
            <p class="text-2xl text-blue-600 mt-4">${winnerMessage}</p>
            <p class="text-xl text-gray-500 mt-2">Final Score: ${highestScore}</p>
            <button id="playAgainBtn" class="mt-8 bg-blue-600 text-white font-bold py-3 px-8 rounded-full text-lg shadow-lg hover:bg-blue-700 transition-transform transform hover:scale-105">
                Play Again
            </button>
        `;
        currentTeamDisplay.textContent = 'Finished';
        document.getElementById('playAgainBtn').addEventListener('click', startGame);
    }

    // --- TIMER FUNCTIONS ---
    function startTimer(duration, isStealMode = false) {
        clearInterval(timerInterval);
        let timeLeft = duration;
        // Corrected timer display to always show two digits
        timerDisplay.textContent = String(timeLeft).padStart(2, '0');
        timerInterval = setInterval(() => {
            timeLeft--;
            timerDisplay.textContent = String(timeLeft).padStart(2, '0');
            if (timeLeft <= 0) {
                stopTimer();
                // When timer runs out on a regular question, count it as wrong.
                if (!isStealMode) {
                   enterStealMode();
                } else { // When steal timer runs out, pass the turn.
                   nextTurn();
                }
            }
        }, 1000);
    }

    function stopTimer() {
        clearInterval(timerInterval);
        timerDisplay.textContent = "00";
    }

    // --- INITIALIZATION ---
    endGameButton.addEventListener('click', endGame);
    window.onload = renderGame;
</script>
</body>
</html>

